---
- name: install git
  ansible.builtin.apt:
    name:
      - git
      - fd-find
      - tig
    state: present
  become: true


- name: create symlink fd
  ansible.builtin.file:
    src: /usr/bin/fdfind
    dest: '{{ home }}/.local/bin/fd'
    state: link


- name: create {{ home }}/apps directory
  ansible.builtin.file:
    path: '{{ home }}/apps'
    state: directory
    mode: "0755"


- name: download bashrc from git
  ansible.builtin.git:
    repo: "https://github.com/OpsCharlie/bash.git"
    dest: '{{ home }}/apps/bash'
  register: git


- name: deploy bash config
  ansible.builtin.command: 'bash {{ home }}/apps/bash/__deploy.sh'
  changed_when: false
  when: git.changed


- name: copy bash theme
  ansible.builtin.copy:
    src: base16-railscasts.dark.sh
    dest: '{{ home }}/Downloads'
    mode: "0644"
  register: theme


- name: run bash theme
  ansible.builtin.command: 'bash {{ home }}/Downloads/base16-railscasts.dark.sh'
  when: theme.changed
